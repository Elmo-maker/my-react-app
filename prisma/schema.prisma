generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model login {
  id_login Int     @id @default(autoincrement())
  username String
  password String
  email    String
  role     String @default("user")
  transaksi transaksi[]
}

model event_tiket {
  id_event      Int            @id @default(autoincrement())
  nama_event    String
  tanggal_event DateTime
  lokasi String
  harga_tiket Int
  jumlah_tiket Int
  jenis_tiket String
  deskripsi    String
  img           String?  @default("https://via.placeholder.com/400x200")
  transaksi     transaksi[]
}

model transaksi {
  id_transaksi      Int      @id @default(autoincrement())
  orderId           String   @unique
  id_event          Int
  jumlah_tiket      Int
  total_harga       Int
  nama_pembeli      String
  email             String
  telepon           String
  status            String   @default("pending")
  tanggal_transaksi DateTime @default(now())
  tanggal_update    DateTime @updatedAt
  loginId   Int
  login     login       @relation(fields: [loginId], references: [id_login])

  event             event_tiket @relation(fields: [id_event], references: [id_event])

}
